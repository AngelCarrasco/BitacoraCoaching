{% extends 'core/base.html' %}

{% block titulo %}
<title>Registro_coach</title>
{% endblock %}

{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'core/css/estilo_r_coach.css' %}">
{% endblock %}

{% block contenido %}
<div class="row">
  <div class="col-md-6">
    <h3>Coachs registrados</h3>
    <table id="tablaCoach" class="table table-bordered table-dark">
      <thead>
        <tr>
          <th scope="col">Run</th>
          <th scope="col">Nombre</th>
          <th scope="col">Apellido Paterno</th>
          <th scope="col">Apellido Materno</th>
          <th scope="col">Correo</th>
          <th scope="col">Telefono</th>
        </tr>
      </thead>
      <tbody>
        {% for coach in coachs%}
          <tr>
            <td>{{coach.0}}</td>
            <td>{{coach.1}}</td>
            <td>{{coach.2}}</td>
            <td>{{coach.3}}</td>
            <td>{{coach.5}}</td>
            <td>{{coach.4}}</td>
            <td><input type="button" class="btnModificar" value="Modificar"></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-md-5 ml-auto">
    <h3>Registro Coach</h3>
    <form id="FormCoach" action="" method="POST">
      {% csrf_token %} 
      <input class="controls" type="text" name="run" id="run" placeholder="Run" oninput="checkRut(this)" maxlength="10" required>
      <input class="controls" type="text" name="nombre" id="nombre" placeholder="Ingrese su Nombre" required>
      <input class="controls" type="text" name="a_paterno" id="a_paterno" placeholder="Apellido paterno" required>
      <input class="controls" type="text" name="a_materno" id="a_materno" placeholder="Apellido materno" required>
      <input class="controls" type="email" name="correo" id="correo" placeholder="Ingrese su correo" required>
      <input class="controls" type="text" name="telefono" id="telefono" placeholder="Telefono" required>
  
      <input class="botons" type="submit" value="Guardar" {% comment %} onclick="limpiarFormulario()" {% endcomment %} >
    </form>
    {{mensaje}}
  </div>
</div>
{% endblock %}

{% block js%}

{% comment %} limpiar el formulario despues de agregar (no funca por alguna razon) {% endcomment %}
<script src=" static/core/js/validacion.js"></script>
<script>
  function limpiarFormulario(){
    document.getElementById("FormCoach").reset();
  };
</script>

{% comment %} traspasar los datos de la tabla al formulario {% endcomment %}
<script>
  $(".btnModificar").click(function(){

      var UserData = {};
      var UserData2 = {};
      var UserData3 = {};
      var UserData4 = {};
      var UserData5 = {};
      var UserData6 = {};
      var UserData7 = {};
      var UserData8 = {};

      var id = $(this).closest('tr').find('td');
        UserData = id.filter(":eq(0)").text();
        UserData2 = id.filter(":eq(1)").text();
        UserData3 = id.filter(":eq(2)").text();
        UserData4 = id.filter(":eq(3)").text();
        UserData5 = id.filter(":eq(4)").text();
        UserData6 = parseInt(id.filter(":eq(5)").text());
        UserData7 = id.filter(":eq(6)").text();
        UserData8 = parseInt(id.filter(":eq(7)").text());
        $("#run").val(UserData);
        $("#nombre").val(UserData2);
        $("#a_paterno").val(UserData3);
        $("#a_materno").val(UserData4);
        $("#correo").val(UserData5);
        $("#telefono").val(UserData6);
        $("#contrasena").val(UserData7);
        $("#contrato").val(UserData8);
        });
</script>
{% endblock %}